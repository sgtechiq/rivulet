<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Creating Migrations</title>
</head>

<body>
    <h1>Creating Migrations (Create/Alter Tables)</h1>
    <p>To create a migration, use:</p>
    <pre><code>php luna create:resource users</code></pre>
    <p>This generates a timestamped file in database/Migrations/ with class CreateUsersTable.</p>
    <p>Edit the up() method to create table:</p>
    <pre><code>$builder->createTable('users', function ($add) {
    $add('id', 'INT', ['auto_increment' => true, 'primary_key' => true]);
    $add('name', 'VARCHAR(255)', ['nullable' => false, 'default' => '']);
    $add('email', 'VARCHAR(255)', ['nullable' => true]);
});</code></pre>
    <p>For alter table in another migration:</p>
    <pre><code>$builder->alterTable('users', function ($alter) {
    $alter('add', 'phone', 'VARCHAR(255)', ['after' => 'email']);
    $alter('modify', 'name', 'VARCHAR(100)', []);
    $alter('rename', 'old_col', to: 'new_col');
    $alter('drop', 'unneeded_col');
});</code></pre>
    <p>Run migrations: php luna database:migrate</p>
    <p>Rollback: php luna database:rollback (last batch)</p>
</body>

</html>